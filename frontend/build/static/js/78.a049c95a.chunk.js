(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[78],{2403:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return p}));var r=a(8),n=a.n(r),i=a(18),s=a(20);function o(e,t,a,r){return c.apply(this,arguments)}function c(){return(c=Object(i.a)(n.a.mark((function e(t,a,r,i){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,s.b.get("/typederequetes?itemsPerPage="+a+"&page="+t+"&id="+r);case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=Object(i.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.post("/typederequetes",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(i.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.put("/typederequetes/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.delete("/typederequetes/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},3179:function(e,t,a){"use strict";a.r(t);var r=a(6),n=a(12),i=a(26),s=a(0),o=a.n(s),c=a(228),l=a.n(c),u=a(231),m=a(224),d=a(606),p=a(1198),b=a(64),g=a(1241),v=a(144),y=a(1201),f=(a(95),a(79)),j=a(229),h=a(45),E=a(1204),O=a(1203),w=a(1202),C=a(783),q=a(2403),x=a(73),P=a(84),S=a(32),k=a(117),T=(a(131),a(367),a(368),a(60)),N=(a(266),a(444),a(20)),D=a(1196);a(369);const Q=f.b().shape({nom:f.c().required("Le champs Nom est requis")});function I({id:e,letypederequete:t,handleFermeture:a,action:i}){var c,l,u;const p=Object(S.useQueryClient)(),g=Object(S.useMutation)(q.a,{onSuccess:()=>{p.invalidateQueries("Typederequetes"),z({message:"Enregistrement r\xe9ussi",open:!0,severity:"success",automaticClose:!0})},onError:()=>{p.invalidateQueries("Typederequetes"),z({message:"Echec lors de l op\xe9ration",open:!0,severity:"error",automaticClose:!0})}}),f=Object(S.useMutation)(q.c,{onSuccess:()=>{p.invalidateQueries("Typederequetes"),z({message:"Mise \xe0 jour r\xe9ussie",open:!0,severity:"success",automaticClose:!0})},onError:()=>{p.invalidateQueries("Typederequetes"),z({message:"Echec lors de la mise \xe0 jour",open:!0,severity:"error",automaticClose:!0})}}),T=Object(s.useState)(t),I=Object(n.a)(T,2),M=I[0],R=(I[1],Object(s.useState)({severity:"severity",message:"",open:!1,automaticClose:!0})),L=Object(n.a)(R,2),A=L[0],z=L[1],B=Object(x.c)({resolver:Object(j.yupResolver)(Q),defaultValues:Object(r.a)(Object(r.a)({},t),{},{id:null!==(c=null===t||void 0===t?void 0:t.id)&&void 0!==c?c:"",nom:null!==(l=null===t||void 0===t?void 0:t.nom)&&void 0!==l?l:"",description:null!==(u=null===t||void 0===t?void 0:t.description)&&void 0!==u?u:""})}),F=B.control,W=B.handleSubmit,J=B.errors,_=(B.reset,Object(s.useState)({})),V=Object(n.a)(_,2),Y=V[0],G=(V[1],e=>{let t=Object(r.a)(Object(r.a)(Object(r.a)({},M),e),Y);M?f.mutate(Object(r.a)({},t)):g.mutate(Object(r.a)({},t))});function H(){a()}return o.a.createElement("div",null,o.a.createElement(P.a,{message:A.message,severity:A.severity,open:A.open,handleAlertClose:A.automaticClose?a:()=>z(Object(r.a)(Object(r.a)({},A),{},{open:!1}))}),o.a.createElement(h.a,{container:!0,spacing:1,justify:"center"},o.a.createElement(h.a,{item:!0,lg:6,md:6,sm:12,xs:12,justify:"center"},o.a.createElement(D.a,{theme:Object(N.a)()},o.a.createElement(y.a,null,o.a.createElement(E.a,{action:o.a.createElement(m.a,{"aria-label":"",onClick:H},"x"),title:"ajout"===i?"Nouveau type de requ\xeate":"Mise \xe0 jour de typederequete",subheader:""}),o.a.createElement(O.a,{className:" px-6 pt-6 pb-6"}," ",o.a.createElement("form",{onSubmit:W(G)},o.a.createElement(h.a,{container:!0,spacing:4,direction:"column"},o.a.createElement(h.a,{item:!0},o.a.createElement(k.a,{id:"nom",nom:"nom",label:"Nom",valeur:null===M||void 0===M?void 0:M.nom,control:F,error:J.nom})),o.a.createElement(h.a,{item:!0},o.a.createElement(k.a,{id:"description",nom:"description",label:"Description",valeur:null===M||void 0===M?void 0:M.description,control:F,error:J.description,multiline:!0,rows:4}))))),o.a.createElement(w.a,null,o.a.createElement(h.a,{container:!0,alignItems:"center",justify:"space-between"},o.a.createElement(h.a,{item:!0},o.a.createElement(v.a,{color:"primary",variant:"contained",type:"submit",onClick:W(G)},f.isLoading||g.isLoading?o.a.createElement(C.a,{color:"inherit"}):o.a.createElement(d.a,null,"send"),o.a.createElement("span",{className:"pl-2 capitalize"},"ajout"===i?o.a.createElement(b.a,null,"Enregistrer"):o.a.createElement(b.a,null,"Mettre \xe0 jour")))),o.a.createElement(h.a,{item:!0},o.a.createElement(v.a,{variant:"outlined",color:"secondary",onClick:H},"Annuler")))))))))}var M=a(204),R=a(230),L=a(300),A=(a(443),a(3),a(110)),z=a(2267),B=a(2191);Object(A.a)(e=>{e.palette,Object(i.a)(e,["palette"]);return{userMenu:{display:"flex",alignItems:"center",cursor:"pointer",borderRadius:24,padding:4,"& span":{margin:"0 8px"}},menuItem:{display:"flex",alignItems:"center",minWidth:185},userMenu:{display:"flex",alignItems:"center",cursor:"pointer",borderRadius:24,padding:4,"& span":{margin:"0 8px"}},menuItem:{display:"flex",alignItems:"center",minWidth:185}}});t.default=()=>{const e=Object(s.useState)({page:0,rowsPerPage:20,recherche:"",filtre:""}),t=Object(n.a)(e,2),a=t[0],i=t[1],c=Object(S.useQueryClient)(),f=Object(S.useQuery)(["Typederequetes",a.page,a.rowsPerPage,a.recherche,a.filtre],()=>Object(q.b)(a.page,a.rowsPerPage,a.recherche,a.filtre),{keepPreviousData:!0}),j=f.isLoading,h=(f.isFetching,f.isError),E=f.error,O=f.data,w=Object(S.useMutation)(q.d,{onSuccess:()=>{G({message:"Suppr\xe9ssion r\xe9ussi",open:!0,severity:"success"})},onError:()=>{G({message:"Echec lors de l op\xe9ration",open:!0,severity:"error"})},onSettled:()=>{c.invalidateQueries("Typederequetes")}}),C=Object(s.useState)(null),x=Object(n.a)(C,2),k=x[0],Q=x[1],A=Object(s.useState)({mode:"affichage",action:"ajout",affichageTable:!0}),F=Object(n.a)(A,2),W=F[0],J=F[1],_=Object(s.useState)({severity:"severity",message:"",open:!1,handleCloseAlert:()=>ae()}),V=Object(n.a)(_,2),Y=V[0],G=V[1],H=Object(s.useState)("Liste des types de requ\xeates"),K=Object(n.a)(H,2),U=K[0],X=K[1],Z=Object(s.useState)(!1),$=Object(n.a)(Z,2),ee=$[0],te=$[1],ae=()=>{G(Object(r.a)(Object(r.a)({},P.a),{},{open:!1}))},re=Object(s.useState)({open:!1,fichier:"",titre:""}),ne=Object(n.a)(re,2),ie=ne[0],se=ne[1],oe=[{name:"id",label:"ID",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"nom",label:"Nom",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"description",label:"Description",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"action",label:"Actions",options:{filter:!1,sort:!1,customBodyRender:(e,t,a)=>o.a.createElement("div",null,o.a.createElement(m.a,{size:"small",onClick:()=>{(e=>{J({mode:"edition",action:"misajour",affichageTable:!1}),Q(e),X("Mise \xe0 jour de typederequete")})({id:t.rowData[0],nom:t.rowData[1],description:t.rowData[2]})}},o.a.createElement(d.a,{color:"primary"},"edit")),o.a.createElement(m.a,{size:"small",onClick:()=>(e=>{te(!0),Q(e)})({id:t.rowData[0]})},o.a.createElement(d.a,{color:"error"},"delete")),o.a.createElement(m.a,{size:"small",onClick:()=>(t.rowData[0],void console.log("affichage de details"))},o.a.createElement(d.a,null,"arrow_right_alt")))}}];return o.a.createElement("div",{className:"m-sm-30"},o.a.createElement(p.a,{open:ie.open,"aria-labelledby":"",maxWidth:"md",onClose:()=>{se(Object(r.a)(Object(r.a)({},ie),{},{open:!1}))}},o.a.createElement(z.a,{id:""},ie.titre),o.a.createElement(B.a,null,o.a.createElement("img",{src:N.c+"/fichiers/documenttypederequete/"+ie.fichier,alt:"documents",srcset:""}))),o.a.createElement(P.a,{message:Y.message,severity:Y.severity,open:Y.open,handleAlertClose:ae}),o.a.createElement("div",{className:"mb-sm-30"},o.a.createElement(M.a,{routeSegments:[{name:"gestion des types de requ\xeates"}]})),o.a.createElement("div",{className:"mb-sm-30"},o.a.createElement(b.a,{variant:"h4"},U)),"affichage"===W.mode?o.a.createElement(g.a,{in:W.affichageTable,direction:"right",unmountOnExit:!0},o.a.createElement("div",null,o.a.createElement(v.a,{className:"mb-4",variant:"contained",color:"primary",onClick:()=>(J({mode:"edition",action:"ajout",affichageTable:!1}),Q(null),void X("Nouveau type de requ\xeate"))},"Nouveau type de requ\xeate"),j?o.a.createElement(T.a,{message:"Chargement des donn\xe9es",type:"info"}):h?o.a.createElement(T.a,{message:"Erreur lors du chargement des donn\xe9es::"+E,type:"error"}):o.a.createElement(L.a,{tag:"div",blocking:!1},o.a.createElement(D.a,{theme:Object(N.a)()},o.a.createElement(l.a,{title:U,data:O["hydra:member"],columns:oe,options:Object(r.a)(Object(r.a)({},u.a),{},{serverSide:!0,count:O["hydra:totalItems"],rowsPerPageOptions:[20,30,50],rowsPerPage:a.rowsPerPage,onChangePage:e=>(e=>{i(Object(r.a)(Object(r.a)({},a),{},{page:e})),c.invalidateQueries("Typederequetes")})(e),onChangeRowsPerPage:e=>(e=>{i(Object(r.a)(Object(r.a)({},a),{},{rowsPerPage:e})),console.log("idbre de ligne par page:"+e),c.invalidateQueries("Typederequetes")})(e),onSearchChange:e=>(e=>{var t;i(Object(r.a)(Object(r.a)({},a),{},{recherche:null!==e&&void 0!==e?e:""})),console.log(null!==(t="texte a chercher"+e)&&void 0!==t?t:""),c.invalidateQueries("Typederequetes")})(e),onFilterChange:()=>{console.log("le filtre a chang\xe9")}})}))),o.a.createElement(y.a,{className:"w-full overflow-auto",elevation:8},o.a.createElement(R.a,{open:ee,onConfirmDialogClose:()=>{te(!1)},onYesClick:()=>{te(!1),w.mutate(k)},text:"Confirmez la suppression de "+(null===k||void 0===k?void 0:k.name)})))):o.a.createElement(I,{action:W.action,letypederequete:k,handleFermeture:()=>{J({mode:"affichage",action:"nouveau",affichageTable:!0}),X("Liste des types de requ\xeates")}}))}}}]);