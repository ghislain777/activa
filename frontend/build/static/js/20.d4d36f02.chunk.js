(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[20],{2315:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return m})),a.d(t,"a",(function(){return p})),a.d(t,"f",(function(){return b})),a.d(t,"g",(function(){return v})),a.d(t,"b",(function(){return E}));var r=a(8),n=a.n(r),c=a(18),s=a(20);function o(e,t,a,r){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(n.a.mark((function e(t,a,r,c){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,s.b.get("/commandes?itemsPerPage="+a+"&page="+t+"&statut="+r);case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t,a,r,n,c,s){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(n.a.mark((function e(t,a,r,c,o,i,l){var u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,s.b.get("/periode/commandes/"+o.id+"?dateinitiale="+i+"&datefinale="+l+"&rowsPerPage="+a+"&page="+t);case 3:return u=e.sent,e.abrupt("return",u.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,a,r,n,c,s){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(n.a.mark((function e(t,a,r,c,o,i,l){var u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,s.b.get("/periode/chauffeurs/"+o.id+"?dateinitiale="+i+"&datefinale="+l+"&rowsPerPage="+a+"&page="+t);case 3:return u=e.sent,e.abrupt("return",u.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.post("/commandes",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.put("/commandes/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.delete("/commandes/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,s.b.post("/commande/"+t.id,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2319:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return m})),a.d(t,"d",(function(){return p})),a.d(t,"e",(function(){return b}));var r=a(8),n=a.n(r),c=a(18),s=a(20);function o(e,t,a,r){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(n.a.mark((function e(t,a,r,c){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,s.b.get("/modedepayements?itemsPerPage="+a+"&page="+t+"&nom="+r);case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t,a,r){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(n.a.mark((function e(t,a,r,c){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,s.b.get("/modedepayements?itemsPerPage="+a+"&page="+t+"&nom="+r+"&actif=1");case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.post("/modedepayements",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.put("/modedepayements/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.delete("/modedepayements/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2323:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return p}));var r=a(8),n=a.n(r),c=a(18),s=a(20);function o(e,t,a,r){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(n.a.mark((function e(t,a,r,c){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,s.b.get("/vehicules?itemsPerPage="+a+"&page="+t+"&marque="+r);case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.post("/vehicules",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.put("/vehicules/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.delete("/vehicules/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2350:function(e,t,a){"use strict";var r=a(0),n=a(51);t.a=Object(n.a)(r.createElement("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"LocalShipping")},2399:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return p}));var r=a(8),n=a.n(r),c=a(18),s=a(20);function o(e,t,a,r){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(n.a.mark((function e(t,a,r,c){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,s.b.get("/typedecourses?itemsPerPage="+a+"&page="+t+"&id="+r);case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.post("/typedecourses",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.put("/typedecourses/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.delete("/typedecourses/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2400:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return p}));var r=a(8),n=a.n(r),c=a(18),s=a(20);function o(e,t,a,r){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(n.a.mark((function e(t,a,r,c){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,s.b.get("/typedecolis?itemsPerPage="+a+"&page="+t+"&id="+r);case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.post("/typedecolis",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.put("/typedecolis/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.delete("/typedecolis/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},3107:function(e,t,a){"use strict";a.r(t);var r=a(6),n=a(12),c=a(0),s=a.n(c),o=a(228),i=a.n(o),l=a(231),u=a(766),m=a(434),d=a(568),p=a(64),f=a(1241),b=a(144),y=a(1201),v=a(45),h=a(79),E=a(229),g=a(784),j=a(783),x=a(606),O=a(2315),w=a(73),C=a(84),N=a(32),k=a(117),S=a(444),P=a(131),D=a(367),q=(a(368),a(369),a(232)),_=a(2399),R=a(2400),B=a(2319),L=a(60),M=a(1192),A=a(427),Q=a(801);const z=h.b().shape({client:h.c().required("Le  client est requis"),modedepayement:h.c().required("Le mode de payement est requis"),adressedepart:h.c().required("Le champs Adresse de d\xe9part est requis"),adressearrivee:h.c().required("Le champs Adresse d arriv\xe9e est requis"),montant:h.a().required("Montant requis").positive("Le montant doit \xeatre positif").integer("Le montant doit \xeatre un nombre entier")});function T({id:e,lecommande:t,handleFermeture:a,action:o}){var i,l,u,f,y,h,T;const I=Object(N.useQueryClient)(),V=Object(c.useState)(new Date),F=Object(n.a)(V,2),H=F[0],G=F[1],J=Object(N.useMutation)(O.a,{onSuccess:()=>{I.invalidateQueries("Commandes"),se({message:"Enregistrement r\xe9ussi",open:!0,severity:"success",automaticClose:!0})},onError:()=>{I.invalidateQueries("Commandes"),se({message:"Echec lors de l op\xe9ration",open:!0,severity:"error",automaticClose:!0})}}),W=Object(N.useMutation)(O.f,{onSuccess:()=>{I.invalidateQueries("Commandes"),se({message:"Mise \xe0 jour r\xe9ussie",open:!0,severity:"success",automaticClose:!0})},onError:()=>{I.invalidateQueries("Commandes"),se({message:"Echec lors de la mise \xe0 jour",open:!0,severity:"error",automaticClose:!0})}}),U=Object(N.useQuery)(["Clients",1],()=>Object(q.d)(0,100,"",""),{keepPreviousData:!0}),Y=Object(N.useQuery)(["Modedepayements",1],()=>Object(B.b)(0,100,"",""),{keepPreviousData:!0}),K=Object(N.useQuery)(["Typedecourses",1],()=>Object(_.b)(0,100,"",""),{keepPreviousData:!0}),X=Object(N.useQuery)(["Typedecolis",1],()=>Object(R.b)(0,100,"",""),{keepPreviousData:!0}),Z=Object(N.useQuery)(["Quartiers",1],()=>Object(Q.b)(0,100,"",""),{keepPreviousData:!0}),$=Object(c.useState)(Object(r.a)(Object(r.a)({},t),{},{executionimmediate:null===(i=null===t||void 0===t?void 0:t.executionimmediate)||void 0===i||i,typedecolisVisible:!1,typedecourse:t?"/api/typedecourses/"+t.typedecourse.id:"/api/typedecourses/1",typedecoli:t?"/api/typedecolis/"+t.typedecoli.id:"/api/typedecolis/1",montant:0,modedepayement:t?"/api/modedepayements/"+t.modedepayement.id:"/api/modedepayements/1",quartierdedepart:t?"/api/quartiers/"+t.quartierdedepart.id:"/api/quartiers/1",quartierdarrivee:t?"/api/quartiers/"+t.modedepayement.id:"/api/quartiers/1"})),ee=Object(n.a)($,2),te=ee[0],ae=ee[1],re=Object(c.useState)({severity:"severity",message:"",open:!1,automaticClose:!0}),ne=Object(n.a)(re,2),ce=ne[0],se=ne[1],oe=Object(w.c)({resolver:Object(E.yupResolver)(z),defaultValues:Object(r.a)({},te)}),ie=oe.control,le=oe.handleSubmit,ue=oe.errors,me=(oe.reset,e=>{console.log("mutation de la commande...");let t=Object(r.a)(Object(r.a)(Object(r.a)({},te),e),{},{dateexecution:H});te.id?W.mutate(Object(r.a)({},t)):J.mutate(Object(r.a)({},t))});return s.a.createElement("div",null,s.a.createElement(C.a,{message:ce.message,severity:ce.severity,open:ce.open,handleAlertClose:ce.automaticClose?a:()=>se(Object(r.a)(Object(r.a)({},ce),{},{open:!1}))}),s.a.createElement("form",{onSubmit:le(me)},s.a.createElement(v.a,{container:!0,spacing:4,direction:"column"},s.a.createElement(v.a,{item:!0},U.isLoading?s.a.createElement(L.a,{message:"chargement des clients..."}):s.a.createElement(P.a,{id:"client",name:"client",label:"Choisir le client",table:"client",control:ie,options:U.data["hydra:member"],error:ue.client,valeur:null!==(l=null===te||void 0===te?void 0:te.client)&&void 0!==l?l:""})),K.isLoading?s.a.createElement(L.a,{message:"chargement des types de courses..."}):s.a.createElement(v.a,{item:!0},s.a.createElement(A.a,{htmlFor:"typedecourse"},"Type de course"),s.a.createElement(m.a,{id:"typedecourse",name:"typedecourse",onChange:e=>{e.target.name=e.target.value,ae(Object(r.a)(Object(r.a)({},te),{},{typedecourse:e.target.value,typedecolisVisible:"/api/typedecourses/1"!=e.target.value}))},fullWidth:!0,value:null===te||void 0===te?void 0:te.typedecourse},K.data["hydra:member"].map(e=>s.a.createElement(d.a,{key:e.id,value:"/api/typedecourses/"+e.id},e.nom))),s.a.createElement(g.a,null,ue.typedecourse?ue.typedecourse.message:null)),te.typedecolisVisible&&s.a.createElement(v.a,{item:!0},X.isLoading?s.a.createElement(L.a,{message:"chargement des types de colis..."}):s.a.createElement(P.a,{id:"typedecoli",name:"typedecoli",label:"Type de colis",table:"typedecoli",control:ie,options:X.data["hydra:member"],error:ue.typedecoli,valeur:null!==(u=null===te||void 0===te?void 0:te.typedecoli)&&void 0!==u?u:""})),s.a.createElement(v.a,{item:!0},Y.isLoading?s.a.createElement(L.a,{message:"chargement des modes de payement..."}):s.a.createElement(P.a,{id:"modedepayement",name:"modedepayement",label:"Choisir le mode de payement",table:"modedepayement",control:ie,options:Y.data["hydra:member"],error:ue.modedepayement,valeur:null!==(f=null===te||void 0===te?void 0:te.modedepayement)&&void 0!==f?f:""})),s.a.createElement(v.a,{item:!0},Z.isLoading?s.a.createElement(L.a,{message:"chargement des quartiers..."}):s.a.createElement(P.a,{id:"quartierdedepart",name:"quartierdedepart",label:"Choisir le quartier de depart",table:"quartier",control:ie,options:Z.data["hydra:member"],error:ue.quartier,valeur:null!==(y=null===te||void 0===te?void 0:te.quartierdedepart)&&void 0!==y?y:""})),s.a.createElement(v.a,{item:!0},s.a.createElement(k.a,{id:"adressedepart",nom:"adressedepart",label:"Adresse de d\xe9part",valeur:null===te||void 0===te?void 0:te.adressedepart,control:ie,error:ue.adressedepart,multiline:!0,rowsMax:4})),s.a.createElement(v.a,{item:!0},Z.isLoading?s.a.createElement(L.a,{message:"chargement des quartiers..."}):s.a.createElement(P.a,{id:"quartierdarrivee",name:"quartierdarrivee",label:"Choisir le quartier",table:"quartier",control:ie,options:Z.data["hydra:member"],error:ue.quartierdarrivee,valeur:null!==(h=null===te||void 0===te?void 0:te.quartierdarrivee)&&void 0!==h?h:""})),s.a.createElement(v.a,{item:!0},s.a.createElement(k.a,{id:"adressearrivee",nom:"adressearrivee",label:"Adresse d arriv\xe9e",valeur:null===te||void 0===te?void 0:te.adressearrivee,control:ie,error:ue.adressearrivee,multiline:!0,rowsMax:4})),s.a.createElement(v.a,null,s.a.createElement(D.a,{id:"executionimmediate",nom:"executionimmediate",control:ie,coche:Boolean(null!==(T=null===te||void 0===te?void 0:te.executionimmediate)&&void 0!==T?T:""),label:"Ex\xe9cution imm\xe9diate",onChange:e=>{console.log(te),ae(Object(r.a)(Object(r.a)({},te),{},{executionimmediate:e}))},changement:e=>{console.log("on a coch\xe9::::"+e),ae(Object(r.a)(Object(r.a)({},te),{},{executionimmediate:e})),null==e&&G(new Date)}})),!te.executionimmediate&&s.a.createElement(v.a,{item:!0},s.a.createElement(S.a,{id:"dateexecution",nom:"dateexecution",label:"date d' ex\xe9cution",valeur:new Date,error:ue.dateexecution,control:ie,handledatechange:e=>{console.log("changement de date:::"+e),G(Object(M.a)(Date.parse(e),"yyyy-MM-dd HH:mm"))}})),s.a.createElement(v.a,{item:!0},s.a.createElement(k.a,{id:"montant",nom:"montant",label:"Montant",valeur:null===te||void 0===te?void 0:te.montant,control:ie,error:ue.montant})),s.a.createElement(v.a,{item:!0},s.a.createElement(v.a,{container:!0,alignItems:"center",justify:"space-between"},s.a.createElement(v.a,{item:!0},s.a.createElement(b.a,{color:"primary",variant:"contained",type:"submit",onClick:le(me)},W.isLoading||J.isLoading?s.a.createElement(j.a,{color:"inherit"}):s.a.createElement(x.a,null,"send"),s.a.createElement("span",{className:"pl-2 capitalize"},"ajout"===o?s.a.createElement(p.a,null,"Enregistrer"):s.a.createElement(p.a,null,"Mettre \xe0 jour")))),s.a.createElement(v.a,{item:!0},s.a.createElement(b.a,{variant:"outlined",color:"secondary",onClick:function(){a()}},"Annuler")))))))}var I=a(204),V=a(230),F=a(2350),H=a(300),G=(a(443),a(2285)),J=a(20),W=a(3),U=a(1198),Y=a(26),K=a(110);Object(K.a)(e=>{e.palette,Object(Y.a)(e,["palette"]);return{gridCard:{"& .grid__card-overlay":{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2,opacity:0,transition:"all 250ms ease-in-out",background:"rgba(0, 0, 0, 0.67)","& > div:nth-child(2)":{position:"absolute",top:0,bottom:0,right:0,left:0,zIndex:-1}},"& .grid__card-bottom":{"& .email":{display:"none"}},"&:hover":{"& .grid__card-overlay":{opacity:1},"& .grid__card-bottom":{"& .email":{display:"block"},"& .date":{display:"none"}}}}}});var X=a(426),Z=a(2192),$=a(2201),ee=a(2303),te=a(224);var ae=({viewMode:e,sliderValue:t,handleSldierChange:a,handleInputChange:r,handleViewChange:n})=>s.a.createElement("div",{className:"flex flex-wrap items-center justify-between"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement(X.a,{onChange:r,InputProps:{startAdornment:s.a.createElement(Z.a,{position:"start"},s.a.createElement(x.a,null,"search"))}})),s.a.createElement("div",{className:"flex items-center"},s.a.createElement($.a,{xsDown:!0},"grid"===e&&s.a.createElement(ee.a,{className:"w-120 mr-4",value:t,min:25,step:null,marks:[{value:25},{value:50},{value:75},{value:100}],onChange:a,"aria-labelledby":"continuous-slider"}),s.a.createElement(te.a,{color:"grid"===e?"primary":"default",onClick:()=>n("grid")},s.a.createElement(x.a,null,"view_comfy"))))),re=a(2302),ne=a(95);const ce=Object(K.a)(e=>{e.palette,Object(Y.a)(e,["palette"]);return{listCard:{"& .project-image":{height:75,width:100},"& .card__button-group":{display:"none",position:"absolute",top:0,bottom:0,right:0,zIndex:1},"&:hover":{"& .card__button-group":{display:"flex"}}}}});var se=({list:e=[]})=>{const t=ce();return s.a.createElement("div",null,e.map((a,r)=>s.a.createElement(y.a,{className:Object(W.default)({[t.listCard]:!0,"card p-2 relative":!0,"mb-4":r<e.length}),key:a.id,elevation:3},s.a.createElement(v.a,{container:!0,justify:"space-between",alignItems:"center"},s.a.createElement(v.a,{item:!0,md:6},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("img",{className:"project-image w-full",src:a.projectImage,alt:"project"}),s.a.createElement("div",{className:"ml-4"},s.a.createElement("p",{className:"m-0 mb-2"},a.projectName),s.a.createElement("div",{className:"flex"},s.a.createElement("small",{className:"text-muted"},a.date),s.a.createElement("small",{className:"text-muted ml-6"},a.email))))),s.a.createElement(v.a,{item:!0,md:2},s.a.createElement("div",{className:"text-muted flex items-center"},s.a.createElement(x.a,{fontSize:"small"},"chat_bubble_outline"),s.a.createElement("span",{className:"mr-6 ml-1"},a.comment),s.a.createElement(x.a,{fontSize:"small"},"desktop_windows"),s.a.createElement("span",{className:"ml-1"},a.revision))),s.a.createElement(v.a,{item:!0,md:2},s.a.createElement("div",{className:"flex items-center"},s.a.createElement(re.a,{src:a.userImage}),s.a.createElement("span",{className:"ml-4"},a.userName))),s.a.createElement(v.a,{item:!0,md:2},s.a.createElement("div",{className:"card__button-group items-center bg-paper"},s.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"filter_none"),s.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"share"),s.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"edit"),s.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"delete")),s.a.createElement("div",{className:"card__drop-menu text-right"},s.a.createElement($.a,{smDown:!0},s.a.createElement(ne.p,{menuButton:s.a.createElement(te.a,null,s.a.createElement(x.a,null,"more_horiz"))},s.a.createElement(d.a,{className:"flex items-center"},s.a.createElement(x.a,{className:"mr-4"},"filter_none")," ","Duplicate"),s.a.createElement(d.a,{className:"flex items-center"},s.a.createElement(x.a,{className:"mr-4"},"share")," ","Share"),s.a.createElement(d.a,{className:"flex items-center"},s.a.createElement(x.a,{className:"mr-4"},"edit")," ","Edit"),s.a.createElement(d.a,{className:"flex items-center"},s.a.createElement(x.a,{className:"mr-4"},"delete")," ","Delete")))))))))};const oe=Object(K.a)(e=>{e.palette,Object(Y.a)(e,["palette"]);return{gridCard:{"& .grid__card-overlay":{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2,opacity:0,transition:"all 250ms ease-in-out",background:"rgba(0, 0, 0, 0.67)","& > div:nth-child(2)":{position:"absolute",top:0,bottom:0,right:0,left:0,zIndex:-1}},"& .grid__card-bottom":{"& .email":{display:"none"}},"&:hover":{"& .grid__card-overlay":{opacity:1},"& .grid__card-bottom":{"& .email":{display:"block"},"& .date":{display:"none"}}}}}});var ie=({list:e=[],sliderValue:t,onSelectionChauffeur:a})=>{const r=oe();return s.a.createElement("div",null,s.a.createElement(v.a,{container:!0,spacing:2},e.map((e,n)=>{return s.a.createElement(v.a,{item:!0,sm:(c=t,25===c?2:50===c?3:75===c?4:100===c?6:void 0),key:e.chauffeur.id},s.a.createElement(y.a,{className:Object(W.default)("flex-column h-full",r.gridCard),elevation:6},s.a.createElement("div",{className:"grid__card-top text-center relative"},s.a.createElement("img",{className:"block w-full",src:J.c+"/fichiers/photosvehicules/"+e.photo,alt:e.chauffeur.nom+" "+e.chauffeur.prenom}),s.a.createElement("div",{className:"grid__card-overlay flex-column"},s.a.createElement("div",{className:"flex items-center justify-between"},s.a.createElement("div",{className:"flex items-center cursor-pointer text-white"},e.typevehicule.nom+" "+e.marque)),s.a.createElement("div",{className:"flex items-center justify-center"},s.a.createElement(b.a,{variant:"outlined",className:"text-white border-color-white",onClick:()=>a(e.chauffeur.id)},"S\xe9lectionner")))),s.a.createElement("div",{className:"grid__card-bottom text-center py-2"},s.a.createElement("p",{className:"m-0"},e.chauffeur.nom+" "+e.chauffeur.prenom),s.a.createElement("small",{className:"date text-muted"},e.chauffeur.telephone+"("+e.chauffeur.quartier.nom+")"),s.a.createElement("small",{className:"email text-muted"},e.chauffeur.telephone+"("+e.chauffeur.quartier.nom+")"),s.a.createElement("p",{className:"m-0"},e.typevehicule.nom+" / "+e.marque))));var c})))},le=a(137),ue=a(2323);var me=({onSelectionChauffeur:e})=>{const t=Object(c.useState)([]),a=Object(n.a)(t,2),r=a[0],o=(a[1],Object(c.useState)(25)),i=Object(n.a)(o,2),l=i[0],u=i[1],m=Object(c.useState)([]),d=Object(n.a)(m,2),p=(d[0],d[1]),f=Object(c.useState)("grid"),b=Object(n.a)(f,2),y=b[0],v=b[1],h=Object(c.useMemo)(()=>Object(le.debounce)(e=>{let t=r.filter(t=>t.projectName.toLowerCase().match(e.toLowerCase()));p([...t])},200),[r]),E=(Object(N.useQueryClient)(),Object(N.useQuery)(["Vehicules"],()=>Object(ue.b)(0,1e3,"",""),{keepPreviousData:!0}));return s.a.createElement("div",{className:"list m-sm-30"},s.a.createElement("div",{className:"mb-4"},s.a.createElement(ae,{viewMode:y,handleViewChange:e=>{v(e)},handleInputChange:e=>{let t=e.target.value;h(t)},handleSldierChange:(e,t)=>{u(t)},sliderValue:l})),E.isLoading?s.a.createElement(L.a,{message:"chargement de la liste des chauffeurs"}):s.a.createElement(s.a.Fragment,null,s.a.createElement($.a,{xsDown:!0},"list"===y?s.a.createElement(se,{list:E.data["hydra:member"]}):s.a.createElement(ie,{list:E.data["hydra:member"],sliderValue:l,onSelectionChauffeur:e})),s.a.createElement($.a,{smUp:!0},s.a.createElement(ie,{list:E.data["hydra:member"],sliderValue:l}))))};var de=({open:e,onSelectionChauffeur:t,onClickSurAnnuler:a,title:r="S\xe9lectionner le chauffeur"})=>s.a.createElement(U.a,{fullScreen:!0,maxWidth:"xl",open:e},s.a.createElement("div",{className:"p-8 text-center"},s.a.createElement("h4",{className:"capitalize m-0 mb-2"},r),s.a.createElement("p",null,"S\xe9lectionner le chauffeur pour ex\xe9cuter cette commande"),s.a.createElement("div",{className:"flex justify-center pt-2 m--2"},s.a.createElement(b.a,{className:"m-2 rounded hover-bg-secondary px-6",variant:"outlined",color:"secondary",onClick:a},"Abandonner l'op\xe9ration")),s.a.createElement(me,{onSelectionChauffeur:t}),s.a.createElement("div",{className:"flex justify-center pt-2 m--2"},s.a.createElement(b.a,{className:"m-2 rounded hover-bg-secondary px-6",variant:"outlined",color:"secondary",onClick:a},"Abandonner l'op\xe9ration"))));t.default=()=>{const e=Object(c.useState)({page:0,rowsPerPage:20,recherche:"Nouveau",filtre:""}),t=Object(n.a)(e,2),a=t[0],o=t[1],h=Object(N.useQueryClient)(),E=Object(N.useQuery)(["Commandes",a.page,a.rowsPerPage,a.recherche,a.filtre],()=>Object(O.c)(a.page,a.rowsPerPage,a.recherche,a.filtre),{keepPreviousData:!0}),g=E.isLoading,j=(E.isFetching,E.isError),x=E.error,w=E.data,k=Object(N.useMutation)(O.g,{onSuccess:()=>{ee({message:"Suppr\xe9ssion r\xe9ussi",open:!0,severity:"success"})},onError:()=>{ee({message:"Echec lors de l op\xe9ration",open:!0,severity:"error"})},onSettled:()=>{h.invalidateQueries("Commandes")}}),S=Object(N.useMutation)(O.b,{onSuccess:()=>{ee({message:"Op\xe9ration r\xe9ussie",open:!0,severity:"success"})},onError:()=>{ee({message:"Echec lors de l op\xe9ration",open:!0,severity:"error"})},onSettled:()=>{h.invalidateQueries("Commandes")}}),P=[{id:4,nom:"Nouveau"}],D=Object(c.useState)({open:!1,idChauffeur:null,commandeEnCours:0}),q=Object(n.a)(D,2),_=q[0],R=q[1],B=Object(c.useState)(null),A=Object(n.a)(B,2),Q=A[0],z=A[1],J=Object(c.useState)({mode:"affichage",action:"ajout",affichageTable:!0}),U=Object(n.a)(J,2),Y=U[0],K=U[1],X=Object(c.useState)({severity:"severity",message:"",open:!1,handleCloseAlert:()=>le()}),Z=Object(n.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)("Liste des nouvelles commandes"),ae=Object(n.a)(te,2),re=ae[0],ne=ae[1],ce=Object(c.useState)(!1),se=Object(n.a)(ce,2),oe=se[0],ie=se[1],le=()=>{ee(Object(r.a)(Object(r.a)({},C.a),{},{open:!1}))},ue=[{name:"id",label:"ID",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>s.a.createElement(s.a.Fragment,null,"id: ",e," ","Colis"==t.rowData[5].nom?s.a.createElement(s.a.Fragment,null,s.a.createElement(F.a,null),s.a.createElement("br",null)," "):"","Colis"==t.rowData[5].nom?s.a.createElement("strong",null,t.rowData[6].nom):"",s.a.createElement("br",null),s.a.createElement("small",{className:"text-muted"},Object(M.a)(Object(G.a)(t.rowData[15]),"dd/MM/yyyy hh:mm")))}},{name:"client",label:"Client",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>s.a.createElement(s.a.Fragment,null,e.nom+" "+e.prenom,s.a.createElement("br",null),s.a.createElement("small",{className:"text-muted"},e.telephone))}},{name:"quartierdedepart",label:"Depart",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return s.a.createElement(s.a.Fragment,null,null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"",s.a.createElement("br",null),s.a.createElement("small",{className:"text-muted"},t.rowData[10]))}}},{name:"quartierdarrivee",label:"Arriv\xe9e",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return s.a.createElement(s.a.Fragment,null,null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"",s.a.createElement("br",null),s.a.createElement("small",{className:"text-muted"},t.rowData[11]))}}},{name:"chauffeur",label:"ID",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"typedecourse",label:"Type de course",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>{switch(e.id){case 1:return e.nom;case 2:return s.a.createElement("span",null," ",e.nom,": ",s.a.createElement("br",null)," ",s.a.createElement("strong",null,t.rowData[6].nom)," ")}}}},{name:"typedecoli",label:"Type de colis",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:""}}},{name:"traitepar",label:"trait\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"encaissepar",label:"Encaiss\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"modedepayement",label:"Mode de payement",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"adressedepart",label:"Adresse de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"adressearrivee",label:"Adresse d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"gpsdepart",label:"Position GPS de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"gpsarrivee",label:"Position GPS d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"statut",label:"Statut",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>s.a.createElement("small",{className:Object(W.default)({"border-radius-4  text-white px-2 py-2px":!0,"bg-primary":"Nouveau"===e,"bg-light-green":"En cours d'ex\xe9cution"===e,"bg-error":"Annul\xe9e"===e,"bg-secondary":"Confirm\xe9e"===e,"bg-green":"Clotur\xe9e"===e})},e)}},{name:"datecommande",label:"Date de la commande",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>Object(M.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"executionimmediate",label:"Execution immediate",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>s.a.createElement(u.a,{checked:e})}},{name:"dateexecution",label:"Date d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>Object(M.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"traitele",label:"Trait\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"datedebutexecution",label:"D\xe9but d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"datefinexecution",label:"Fin d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"encaissele",label:"Encaiss\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"montant",label:"montant",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"recepteurducolis",label:"Recepteur du colis",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>s.a.createElement(s.a.Fragment,null,e,s.a.createElement("br",null),s.a.createElement("small",{className:"text-muted"},t.rowData[24]))}},{name:"telephonerecepteur",label:"T\xe9l\xe9phone du recepteur de colis",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"action",label:"Actions",options:{filter:!1,display:"excluded",sort:!1,customBodyRender:(e,t,a)=>s.a.createElement("div",null,s.a.createElement(m.a,{disabled:!0,value:t.rowData[10],id:t.rowData[0],name:t.rowData[0],variant:"outlined",onChange:e=>((e,t)=>{let a=e.target.value,n=t;"Confirm\xe9e"!=a?S.mutate({id:n,chauffeur:2,operation:a}):R(Object(r.a)(Object(r.a)({},_),{},{open:!0,commandeEnCours:n}))})(e,t.rowData[0])},P.map(e=>s.a.createElement(d.a,{key:e.id,value:e.nom},e.nom))))}}];return s.a.createElement("div",{className:"m-sm-30"},s.a.createElement(C.a,{message:$.message,severity:$.severity,open:$.open,handleAlertClose:le}),s.a.createElement(de,{open:_.open,onSelectionChauffeur:e=>{R(Object(r.a)(Object(r.a)({},_),{},{open:!1,idChauffeur:e})),S.mutate({id:_.commandeEnCours,chauffeur:e,operation:"Confirm\xe9e"})},onClickSurAnnuler:()=>{R(Object(r.a)(Object(r.a)({},_),{},{open:!1}))}}),s.a.createElement("div",{className:"mb-sm-30"},s.a.createElement(I.a,{routeSegments:[{name:"Liste des nouvelles commandes"}]})),s.a.createElement("div",{className:"mb-sm-30"},s.a.createElement(p.a,{variant:"h4"},re)),"affichage"===Y.mode?s.a.createElement(f.a,{in:Y.affichageTable,direction:"right",unmountOnExit:!0},s.a.createElement("div",null,s.a.createElement(b.a,{className:"mb-4",variant:"contained",color:"primary",onClick:()=>(K({mode:"edition",action:"ajout",affichageTable:!1}),z(null),void ne("Nouvelle commande"))},"Nouvelle commande"),g?s.a.createElement(L.a,{message:"Chargement des donn\xe9es",type:"info"}):j?s.a.createElement(L.a,{message:"Erreur lors du chargement des donn\xe9es::"+x,type:"error"}):s.a.createElement(H.a,{tag:"div",blocking:!1},s.a.createElement(i.a,{title:re,data:w["hydra:member"],columns:ue,options:Object(r.a)(Object(r.a)({},l.a),{},{serverSide:!0,count:w["hydra:totalItems"],rowsPerPageOptions:[20,30,50],rowsPerPage:a.rowsPerPage,onChangePage:e=>(e=>{o(Object(r.a)(Object(r.a)({},a),{},{page:e})),h.invalidateQueries("Commandes")})(e),onChangeRowsPerPage:e=>(e=>{o(Object(r.a)(Object(r.a)({},a),{},{rowsPerPage:e})),console.log("statutbre de ligne par page:"+e),h.invalidateQueries("Commandes")})(e),onSearchChange:e=>(e=>{var t;console.log(null!==(t="texte a chercher"+e)&&void 0!==t?t:""),h.invalidateQueries("Commandes")})(e),onFilterChange:()=>{console.log("le filtre a chang\xe9")}})})),s.a.createElement(y.a,{className:"w-full overflow-auto",elevation:8},s.a.createElement(V.a,{open:oe,onConfirmDialogClose:()=>{ie(!1)},onYesClick:()=>{ie(!1),k.mutate(Q)},text:"Confirmez la suppression de "+(null===Q||void 0===Q?void 0:Q.name)})))):s.a.createElement(v.a,{container:!0,spacing:6,alignContent:"center",justify:"center"},s.a.createElement(v.a,{item:!0,lg:6,md:6,sm:12,xs:12},s.a.createElement(y.a,{className:"px-6 pt-2 pb-4"},s.a.createElement(T,{action:Y.action,lecommande:Q,handleFermeture:()=>{K({mode:"affichage",action:"nouveau",affichageTable:!0}),ne("Liste des nouvelles commandes")}})))))}}}]);