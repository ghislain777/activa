(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[76],{2319:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return m})),a.d(t,"d",(function(){return p})),a.d(t,"e",(function(){return f}));var n=a(8),r=a.n(n),o=a(18),c=a(20);function s(e,t,a,n){return i.apply(this,arguments)}function i(){return(i=Object(o.a)(r.a.mark((function e(t,a,n,o){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,c.b.get("/modedepayements?itemsPerPage="+a+"&page="+t+"&nom="+n);case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t,a,n){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(r.a.mark((function e(t,a,n,o){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,c.b.get("/modedepayements?itemsPerPage="+a+"&page="+t+"&nom="+n+"&actif=1");case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.b.post("/modedepayements",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.b.put("/modedepayements/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.b.delete("/modedepayements/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},3178:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(12),o=a(0),c=a.n(o),s=a(228),i=a.n(s),l=a(231),u=a(766),m=a(224),d=a(606),p=a(64),b=a(1241),f=a(144),v=a(1201),g=a(45),y=a(79),h=a(229),j=a(783),E=a(2319),O=a(73),w=a(84),C=a(32),P=a(117),S=(a(131),a(367)),x=(a(368),a(369),a(60));const M=y.b().shape({nom:y.c().required("Le champs Nom est requis"),description:y.c().required("Le champs Description est requis")});function k({id:e,lemodedepayement:t,handleFermeture:a,action:s}){var i,l;const u=Object(C.useQueryClient)(),m=Object(C.useMutation)(E.a,{onSuccess:()=>{u.invalidateQueries("Modedepayements"),L({message:"Enregistrement r\xe9ussi",open:!0,severity:"success",automaticClose:!0})},onError:()=>{u.invalidateQueries("Modedepayements"),L({message:"Echec lors de l op\xe9ration",open:!0,severity:"error",automaticClose:!0})}}),b=Object(C.useMutation)(E.d,{onSuccess:()=>{u.invalidateQueries("Modedepayements"),L({message:"Mise \xe0 jour r\xe9ussie",open:!0,severity:"success",automaticClose:!0})},onError:()=>{u.invalidateQueries("Modedepayements"),L({message:"Echec lors de la mise \xe0 jour",open:!0,severity:"error",automaticClose:!0})}}),v=Object(o.useState)(t),y=Object(r.a)(v,2),x=y[0],k=y[1],N=Object(o.useState)({severity:"severity",message:"",open:!1,automaticClose:!0}),D=Object(r.a)(N,2),Q=D[0],L=D[1],A=Object(O.c)({resolver:Object(h.yupResolver)(M),defaultValues:Object(n.a)(Object(n.a)({},x),{},{actif:null!==(i=null===x||void 0===x?void 0:x.actif)&&void 0!==i&&i})}),R=A.control,B=A.handleSubmit,T=A.errors,q=(A.reset,e=>{let t=Object(n.a)(Object(n.a)({},x),e);x?b.mutate(Object(n.a)({},t)):m.mutate(Object(n.a)({},t))});return c.a.createElement("div",null,c.a.createElement(w.a,{message:Q.message,severity:Q.severity,open:Q.open,handleAlertClose:Q.automaticClose?a:()=>L(Object(n.a)(Object(n.a)({},Q),{},{open:!1}))}),c.a.createElement("form",{onSubmit:B(q)},c.a.createElement(g.a,{container:!0,spacing:4,direction:"column"},c.a.createElement(g.a,{item:!0},c.a.createElement(P.a,{id:"nom",nom:"nom",label:"Nom",valeur:null===x||void 0===x?void 0:x.nom,control:R,error:T.nom})),c.a.createElement(g.a,{item:!0},c.a.createElement(P.a,{id:"description",nom:"description",label:"Description",valeur:null===x||void 0===x?void 0:x.description,control:R,error:T.description})),c.a.createElement(g.a,null,c.a.createElement(S.a,{id:"actif",nom:"actif",control:R,coche:Boolean(null!==(l=null===x||void 0===x?void 0:x.actif)&&void 0!==l?l:""),onChange:e=>{k(Object(n.a)(Object(n.a)({},x),{},{actif:e}))},changement:e=>{}})),c.a.createElement(g.a,{item:!0},c.a.createElement(g.a,{container:!0,alignItems:"center",justify:"space-between"},c.a.createElement(g.a,{item:!0},c.a.createElement(f.a,{color:"primary",variant:"contained",type:"submit",onClick:B(q)},b.isLoading||m.isLoading?c.a.createElement(j.a,{color:"inherit"}):c.a.createElement(d.a,null,"send"),c.a.createElement("span",{className:"pl-2 capitalize"},"ajout"===s?c.a.createElement(p.a,null,"Enregistrer"):c.a.createElement(p.a,null,"Mettre \xe0 jour")))),c.a.createElement(g.a,{item:!0},c.a.createElement(f.a,{variant:"outlined",color:"secondary",onClick:function(){a()}},"Annuler")))))))}var N=a(204),D=a(230),Q=a(300);a(443),a(20);t.default=()=>{const e=Object(o.useState)({page:0,rowsPerPage:20,recherche:"",filtre:""}),t=Object(r.a)(e,2),a=t[0],s=t[1],y=Object(C.useQueryClient)(),h=Object(C.useQuery)(["Modedepayements",a.page,a.rowsPerPage,a.recherche,a.filtre],()=>Object(E.c)(a.page,a.rowsPerPage,a.recherche,a.filtre),{keepPreviousData:!0}),j=h.isLoading,O=(h.isFetching,h.isError),P=h.error,S=h.data,M=Object(C.useMutation)(E.e,{onSuccess:()=>{Y({message:"Suppr\xe9ssion r\xe9ussi",open:!0,severity:"success"})},onError:()=>{Y({message:"Echec lors de l op\xe9ration",open:!0,severity:"error"})},onSettled:()=>{y.invalidateQueries("Modedepayements")}}),L=Object(o.useState)(null),A=Object(r.a)(L,2),R=A[0],B=A[1],T=Object(o.useState)({mode:"affichage",action:"ajout",affichageTable:!0}),q=Object(r.a)(T,2),F=q[0],z=q[1],I=Object(o.useState)({severity:"severity",message:"",open:!1,handleCloseAlert:()=>_()}),J=Object(r.a)(I,2),V=J[0],Y=J[1],G=Object(o.useState)("Liste des modes de payement"),H=Object(r.a)(G,2),K=H[0],U=H[1],W=Object(o.useState)(!1),X=Object(r.a)(W,2),Z=X[0],$=X[1],_=()=>{Y(Object(n.a)(Object(n.a)({},w.a),{},{open:!1}))},ee=[{name:"id",label:"ID",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"nom",label:"Nom",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"description",label:"Description",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"actif",label:"Actif?",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>c.a.createElement(u.a,{checked:e})}},{name:"action",label:"Actions",options:{filter:!1,sort:!1,customBodyRender:(e,t,a)=>c.a.createElement("div",null,c.a.createElement(m.a,{size:"small",onClick:()=>{(e=>{z({mode:"edition",action:"misajour",affichageTable:!1}),B(e),U("Mise \xe0 jour de mode de payement")})({id:t.rowData[0],nom:t.rowData[1],description:t.rowData[2],actif:t.rowData[3]})}},c.a.createElement(d.a,{color:"primary"},"edit")))}}];return c.a.createElement("div",{className:"m-sm-30"},c.a.createElement(w.a,{message:V.message,severity:V.severity,open:V.open,handleAlertClose:_}),c.a.createElement("div",{className:"mb-sm-30"},c.a.createElement(N.a,{routeSegments:[{name:"Modes de payement"}]})),c.a.createElement("div",{className:"mb-sm-30"},c.a.createElement(p.a,{variant:"h4"},K)),"affichage"===F.mode?c.a.createElement(b.a,{in:F.affichageTable,direction:"right",unmountOnExit:!0},c.a.createElement("div",null,c.a.createElement(f.a,{className:"mb-4",variant:"contained",color:"primary",onClick:()=>(z({mode:"edition",action:"ajout",affichageTable:!1}),B(null),void U("Nouveau mode"))},"Nouveau mode de payement"),j?c.a.createElement(x.a,{message:"Chargement des donn\xe9es",type:"info"}):O?c.a.createElement(x.a,{message:"Erreur lors du chargement des donn\xe9es::"+P,type:"error"}):c.a.createElement(Q.a,{tag:"div",blocking:!1},c.a.createElement(i.a,{title:K,data:S["hydra:member"],columns:ee,options:Object(n.a)(Object(n.a)({},l.a),{},{serverSide:!0,count:S["hydra:totalItems"],rowsPerPageOptions:[20,30,50],rowsPerPage:a.rowsPerPage,onChangePage:e=>(e=>{s(Object(n.a)(Object(n.a)({},a),{},{page:e})),y.invalidateQueries("Modedepayements")})(e),onChangeRowsPerPage:e=>(e=>{s(Object(n.a)(Object(n.a)({},a),{},{rowsPerPage:e})),console.log("nombre de ligne par page:"+e),y.invalidateQueries("Modedepayements")})(e),onSearchChange:e=>(e=>{var t;s(Object(n.a)(Object(n.a)({},a),{},{recherche:null!==e&&void 0!==e?e:""})),console.log(null!==(t="texte a chercher"+e)&&void 0!==t?t:""),y.invalidateQueries("Modedepayements")})(e),onFilterChange:()=>{console.log("le filtre a chang\xe9")}})})),c.a.createElement(v.a,{className:"w-full overflow-auto",elevation:8},c.a.createElement(D.a,{open:Z,onConfirmDialogClose:()=>{$(!1)},onYesClick:()=>{$(!1),M.mutate(R)},text:"Confirmez la suppression de "+(null===R||void 0===R?void 0:R.name)})))):c.a.createElement(g.a,{container:!0,spacing:6,alignContent:"center",justify:"center"},c.a.createElement(g.a,{item:!0,lg:6,md:6,sm:12,xs:12},c.a.createElement(v.a,{className:"px-6 pt-2 pb-4"},c.a.createElement(k,{action:F.action,lemodedepayement:R,handleFermeture:()=>{z({mode:"affichage",action:"nouveau",affichageTable:!0}),U("Liste des modes de payement")}})))))}}}]);