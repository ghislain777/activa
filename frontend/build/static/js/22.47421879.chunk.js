(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[22],{2339:function(e,a,t){"use strict";t.d(a,"c",(function(){return s})),t.d(a,"e",(function(){return c})),t.d(a,"d",(function(){return d})),t.d(a,"a",(function(){return p})),t.d(a,"f",(function(){return f})),t.d(a,"g",(function(){return y})),t.d(a,"b",(function(){return E}));var r=t(7),n=t.n(r),l=t(10),o=t(9);function s(e,a,t,r){return i.apply(this,arguments)}function i(){return(i=Object(l.a)(n.a.mark((function e(a,t,r,l){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a+=1,e.next=3,o.b.get("/commandes?itemsPerPage="+t+"&page="+a+"&statut="+r);case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,a,t,r,n,l,o){return m.apply(this,arguments)}function m(){return(m=Object(l.a)(n.a.mark((function e(a,t,r,l,s,i,c){var m;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a+=1,e.next=3,o.b.get("/periode/commandes/"+s.id+"?dateinitiale="+i+"&datefinale="+c+"&rowsPerPage="+t+"&page="+a);case 3:return m=e.sent,e.abrupt("return",m.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,a,t,r,n,l,o){return u.apply(this,arguments)}function u(){return(u=Object(l.a)(n.a.mark((function e(a,t,r,l,s,i,c){var m;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a+=1,e.next=3,o.b.get("/periode/chauffeurs/"+s.id+"?dateinitiale="+i+"&datefinale="+c+"&rowsPerPage="+t+"&page="+a);case 3:return m=e.sent,e.abrupt("return",m.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(n.a.mark((function e(a){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("/commandes",a);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(n.a.mark((function e(a){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.put("/commandes/"+a.id,a);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return h.apply(this,arguments)}function h(){return(h=Object(l.a)(n.a.mark((function e(a){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.delete("/commandes/"+a.id,{method:"DELETE",herdears:{Accept:"application/json"},data:a.id});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(n.a.mark((function e(a){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.next=3,o.b.post("/commande/"+a.id,a);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2347:function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"a",(function(){return c}));var r=t(7),n=t.n(r),l=t(10),o=t(9);function s(e,a,t,r){return i.apply(this,arguments)}function i(){return(i=Object(l.a)(n.a.mark((function e(a,t,r,l){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a+=1,e.next=3,o.b.get("/modedepayements?itemsPerPage="+t+"&page="+a+"&nom="+r);case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,a,t,r){return m.apply(this,arguments)}function m(){return(m=Object(l.a)(n.a.mark((function e(a,t,r,l){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a+=1,e.next=3,o.b.get("/modedepayements?itemsPerPage="+t+"&page="+a+"&nom="+r+"&actif=1");case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2351:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var r=t(7),n=t.n(r),l=t(10),o=t(9);function s(e,a,t,r){return i.apply(this,arguments)}function i(){return(i=Object(l.a)(n.a.mark((function e(a,t,r,l){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a+=1,e.next=3,o.b.get("/vehicules?itemsPerPage="+t+"&page="+a+"&marque="+r);case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2372:function(e,a,t){"use strict";var r=t(0),n=t(47);a.a=Object(n.a)(r.createElement("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"LocalShipping")},3114:function(e,a,t){"use strict";t.r(a);var r=t(3),n=t(12),l=t(0),o=t.n(l),s=t(135),i=t.n(s),c=t(100),m=t(785),d=t(441),u=t(587),p=t(59),b=t(1262),f=t(97),v=t(450),y=t(21),h=t(36),E=t(99),g=t(802),j=t(375),x=t(625),O=t(2339),C=t(57),w=t(64),N=t(17),S=t(43),P=t(241),k=t(58),q=t(214),D=(t(215),t(213),t(243)),_=t(7),R=t.n(_),B=t(10),M=t(9);function L(){return(L=Object(B.a)(R.a.mark((function e(a,t,r,n){var l;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a+=1,e.next=3,M.b.get("/typedecourses?itemsPerPage="+t+"&page="+a+"&id="+r);case 3:return l=e.sent,e.abrupt("return",l.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(B.a)(R.a.mark((function e(a,t,r,n){var l;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a+=1,e.next=3,M.b.get("/typedecolis?itemsPerPage="+t+"&page="+a+"&id="+r);case 3:return l=e.sent,e.abrupt("return",l.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=t(2347),A=t(33),I=t(1217),V=t(434),F=t(1172);const T=h.b().shape({client:h.c().required("Le  client est requis"),modedepayement:h.c().required("Le mode de payement est requis"),adressedepart:h.c().required("Le champs Adresse de d\xe9part est requis"),adressearrivee:h.c().required("Le champs Adresse d arriv\xe9e est requis"),montant:h.a().required("Montant requis").positive("Le montant doit \xeatre positif").integer("Le montant doit \xeatre un nombre entier")});function H({id:e,lecommande:a,handleFermeture:t,action:s}){var i,c,m,b,v,h,_;const R=Object(N.useQueryClient)(),B=Object(l.useState)(new Date),M=Object(n.a)(B,2),H=M[0],G=M[1],J=Object(N.useMutation)(O.a,{onSuccess:()=>{R.invalidateQueries("Commandes"),oe({message:"Enregistrement r\xe9ussi",open:!0,severity:"success",automaticClose:!0})},onError:()=>{R.invalidateQueries("Commandes"),oe({message:"Echec lors de l op\xe9ration",open:!0,severity:"error",automaticClose:!0})}}),W=Object(N.useMutation)(O.f,{onSuccess:()=>{R.invalidateQueries("Commandes"),oe({message:"Mise \xe0 jour r\xe9ussie",open:!0,severity:"success",automaticClose:!0})},onError:()=>{R.invalidateQueries("Commandes"),oe({message:"Echec lors de la mise \xe0 jour",open:!0,severity:"error",automaticClose:!0})}}),U=Object(N.useQuery)(["Clients",1],()=>Object(D.d)(0,100,"",""),{keepPreviousData:!0}),Y=Object(N.useQuery)(["Modedepayements",1],()=>Object(z.a)(0,100,"",""),{keepPreviousData:!0}),K=Object(N.useQuery)(["Typedecourses",1],()=>function(e,a,t,r){return L.apply(this,arguments)}(0,100,"",""),{keepPreviousData:!0}),X=Object(N.useQuery)(["Typedecolis",1],()=>function(e,a,t,r){return Q.apply(this,arguments)}(0,100,"",""),{keepPreviousData:!0}),Z=Object(N.useQuery)(["Quartiers",1],()=>Object(F.a)(0,100,"",""),{keepPreviousData:!0}),$=Object(l.useState)(Object(r.a)(Object(r.a)({},a),{},{executionimmediate:null===(i=null===a||void 0===a?void 0:a.executionimmediate)||void 0===i||i,typedecolisVisible:!1,typedecourse:a?"/api/typedecourses/"+a.typedecourse.id:"/api/typedecourses/1",typedecoli:a?"/api/typedecolis/"+a.typedecoli.id:"/api/typedecolis/1",montant:0,modedepayement:a?"/api/modedepayements/"+a.modedepayement.id:"/api/modedepayements/1",quartierdedepart:a?"/api/quartiers/"+a.quartierdedepart.id:"/api/quartiers/1",quartierdarrivee:a?"/api/quartiers/"+a.modedepayement.id:"/api/quartiers/1"})),ee=Object(n.a)($,2),ae=ee[0],te=ee[1],re=Object(l.useState)({severity:"severity",message:"",open:!1,automaticClose:!0}),ne=Object(n.a)(re,2),le=ne[0],oe=ne[1],se=Object(C.c)({resolver:Object(E.yupResolver)(T),defaultValues:Object(r.a)({},ae)}),ie=se.control,ce=se.handleSubmit,me=se.errors,de=(se.reset,e=>{console.log("mutation de la commande...");let a=Object(r.a)(Object(r.a)(Object(r.a)({},ae),e),{},{dateexecution:H});ae.id?W.mutate(Object(r.a)({},a)):J.mutate(Object(r.a)({},a))});return o.a.createElement("div",null,o.a.createElement(w.a,{message:le.message,severity:le.severity,open:le.open,handleAlertClose:le.automaticClose?t:()=>oe(Object(r.a)(Object(r.a)({},le),{},{open:!1}))}),o.a.createElement("form",{onSubmit:ce(de)},o.a.createElement(y.a,{container:!0,spacing:4,direction:"column"},o.a.createElement(y.a,{item:!0},U.isLoading?o.a.createElement(A.a,{message:"chargement des clients..."}):o.a.createElement(k.a,{id:"client",name:"client",label:"Choisir le client",table:"client",control:ie,options:U.data["hydra:member"],error:me.client,valeur:null!==(c=null===ae||void 0===ae?void 0:ae.client)&&void 0!==c?c:""})),K.isLoading?o.a.createElement(A.a,{message:"chargement des types de courses..."}):o.a.createElement(y.a,{item:!0},o.a.createElement(V.a,{htmlFor:"typedecourse"},"Type de course"),o.a.createElement(d.a,{id:"typedecourse",name:"typedecourse",onChange:e=>{e.target.name=e.target.value,te(Object(r.a)(Object(r.a)({},ae),{},{typedecourse:e.target.value,typedecolisVisible:"/api/typedecourses/1"!=e.target.value}))},fullWidth:!0,value:null===ae||void 0===ae?void 0:ae.typedecourse},K.data["hydra:member"].map(e=>o.a.createElement(u.a,{key:e.id,value:"/api/typedecourses/"+e.id},e.nom))),o.a.createElement(g.a,null,me.typedecourse?me.typedecourse.message:null)),ae.typedecolisVisible&&o.a.createElement(y.a,{item:!0},X.isLoading?o.a.createElement(A.a,{message:"chargement des types de colis..."}):o.a.createElement(k.a,{id:"typedecoli",name:"typedecoli",label:"Type de colis",table:"typedecoli",control:ie,options:X.data["hydra:member"],error:me.typedecoli,valeur:null!==(m=null===ae||void 0===ae?void 0:ae.typedecoli)&&void 0!==m?m:""})),o.a.createElement(y.a,{item:!0},Y.isLoading?o.a.createElement(A.a,{message:"chargement des modes de payement..."}):o.a.createElement(k.a,{id:"modedepayement",name:"modedepayement",label:"Choisir le mode de payement",table:"modedepayement",control:ie,options:Y.data["hydra:member"],error:me.modedepayement,valeur:null!==(b=null===ae||void 0===ae?void 0:ae.modedepayement)&&void 0!==b?b:""})),o.a.createElement(y.a,{item:!0},Z.isLoading?o.a.createElement(A.a,{message:"chargement des quartiers..."}):o.a.createElement(k.a,{id:"quartierdedepart",name:"quartierdedepart",label:"Choisir le quartier de depart",table:"quartier",control:ie,options:Z.data["hydra:member"],error:me.quartier,valeur:null!==(v=null===ae||void 0===ae?void 0:ae.quartierdedepart)&&void 0!==v?v:""})),o.a.createElement(y.a,{item:!0},o.a.createElement(S.a,{id:"adressedepart",nom:"adressedepart",label:"Adresse de d\xe9part",valeur:null===ae||void 0===ae?void 0:ae.adressedepart,control:ie,error:me.adressedepart,multiline:!0,rowsMax:4})),o.a.createElement(y.a,{item:!0},Z.isLoading?o.a.createElement(A.a,{message:"chargement des quartiers..."}):o.a.createElement(k.a,{id:"quartierdarrivee",name:"quartierdarrivee",label:"Choisir le quartier",table:"quartier",control:ie,options:Z.data["hydra:member"],error:me.quartierdarrivee,valeur:null!==(h=null===ae||void 0===ae?void 0:ae.quartierdarrivee)&&void 0!==h?h:""})),o.a.createElement(y.a,{item:!0},o.a.createElement(S.a,{id:"adressearrivee",nom:"adressearrivee",label:"Adresse d arriv\xe9e",valeur:null===ae||void 0===ae?void 0:ae.adressearrivee,control:ie,error:me.adressearrivee,multiline:!0,rowsMax:4})),o.a.createElement(y.a,null,o.a.createElement(q.a,{id:"executionimmediate",nom:"executionimmediate",control:ie,coche:Boolean(null!==(_=null===ae||void 0===ae?void 0:ae.executionimmediate)&&void 0!==_?_:""),label:"Ex\xe9cution imm\xe9diate",onChange:e=>{console.log(ae),te(Object(r.a)(Object(r.a)({},ae),{},{executionimmediate:e}))},changement:e=>{console.log("on a coch\xe9::::"+e),te(Object(r.a)(Object(r.a)({},ae),{},{executionimmediate:e})),null==e&&G(new Date)}})),!ae.executionimmediate&&o.a.createElement(y.a,{item:!0},o.a.createElement(P.a,{id:"dateexecution",nom:"dateexecution",label:"date d' ex\xe9cution",valeur:new Date,error:me.dateexecution,control:ie,handledatechange:e=>{console.log("changement de date:::"+e),G(Object(I.a)(Date.parse(e),"yyyy-MM-dd HH:mm"))}})),o.a.createElement(y.a,{item:!0},o.a.createElement(S.a,{id:"montant",nom:"montant",label:"Montant",valeur:null===ae||void 0===ae?void 0:ae.montant,control:ie,error:me.montant})),o.a.createElement(y.a,{item:!0},o.a.createElement(y.a,{container:!0,alignItems:"center",justify:"space-between"},o.a.createElement(y.a,{item:!0},o.a.createElement(f.a,{color:"primary",variant:"contained",type:"submit",onClick:ce(de)},W.isLoading||J.isLoading?o.a.createElement(j.a,{color:"inherit"}):o.a.createElement(x.a,null,"send"),o.a.createElement("span",{className:"pl-2 capitalize"},"ajout"===s?o.a.createElement(p.a,null,"Enregistrer"):o.a.createElement(p.a,null,"Mettre \xe0 jour")))),o.a.createElement(y.a,{item:!0},o.a.createElement(f.a,{variant:"outlined",color:"secondary",onClick:function(){t()}},"Annuler")))))))}var G=t(142),J=t(136),W=t(2372),U=t(150),Y=(t(240),t(2310)),K=t(4),X=t(1222),Z=t(27),$=t(117);Object($.a)(e=>{e.palette,Object(Z.a)(e,["palette"]);return{gridCard:{"& .grid__card-overlay":{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2,opacity:0,transition:"all 250ms ease-in-out",background:"rgba(0, 0, 0, 0.67)","& > div:nth-child(2)":{position:"absolute",top:0,bottom:0,right:0,left:0,zIndex:-1}},"& .grid__card-bottom":{"& .email":{display:"none"}},"&:hover":{"& .grid__card-overlay":{opacity:1},"& .grid__card-bottom":{"& .email":{display:"block"},"& .date":{display:"none"}}}}}});var ee=t(433),ae=t(2214),te=t(2222),re=t(2327),ne=t(164);var le=({viewMode:e,sliderValue:a,handleSldierChange:t,handleInputChange:r,handleViewChange:n})=>o.a.createElement("div",{className:"flex flex-wrap items-center justify-between"},o.a.createElement("div",{className:"flex items-center"},o.a.createElement(ee.a,{onChange:r,InputProps:{startAdornment:o.a.createElement(ae.a,{position:"start"},o.a.createElement(x.a,null,"search"))}})),o.a.createElement("div",{className:"flex items-center"},o.a.createElement(te.a,{xsDown:!0},"grid"===e&&o.a.createElement(re.a,{className:"w-120 mr-4",value:a,min:25,step:null,marks:[{value:25},{value:50},{value:75},{value:100}],onChange:t,"aria-labelledby":"continuous-slider"}),o.a.createElement(ne.a,{color:"grid"===e?"primary":"default",onClick:()=>n("grid")},o.a.createElement(x.a,null,"view_comfy"))))),oe=t(2326),se=t(78);const ie=Object($.a)(e=>{e.palette,Object(Z.a)(e,["palette"]);return{listCard:{"& .project-image":{height:75,width:100},"& .card__button-group":{display:"none",position:"absolute",top:0,bottom:0,right:0,zIndex:1},"&:hover":{"& .card__button-group":{display:"flex"}}}}});var ce=({list:e=[]})=>{const a=ie();return o.a.createElement("div",null,e.map((t,r)=>o.a.createElement(v.a,{className:Object(K.default)({[a.listCard]:!0,"card p-2 relative":!0,"mb-4":r<e.length}),key:t.id,elevation:3},o.a.createElement(y.a,{container:!0,justify:"space-between",alignItems:"center"},o.a.createElement(y.a,{item:!0,md:6},o.a.createElement("div",{className:"flex items-center"},o.a.createElement("img",{className:"project-image w-full",src:t.projectImage,alt:"project"}),o.a.createElement("div",{className:"ml-4"},o.a.createElement("p",{className:"m-0 mb-2"},t.projectName),o.a.createElement("div",{className:"flex"},o.a.createElement("small",{className:"text-muted"},t.date),o.a.createElement("small",{className:"text-muted ml-6"},t.email))))),o.a.createElement(y.a,{item:!0,md:2},o.a.createElement("div",{className:"text-muted flex items-center"},o.a.createElement(x.a,{fontSize:"small"},"chat_bubble_outline"),o.a.createElement("span",{className:"mr-6 ml-1"},t.comment),o.a.createElement(x.a,{fontSize:"small"},"desktop_windows"),o.a.createElement("span",{className:"ml-1"},t.revision))),o.a.createElement(y.a,{item:!0,md:2},o.a.createElement("div",{className:"flex items-center"},o.a.createElement(oe.a,{src:t.userImage}),o.a.createElement("span",{className:"ml-4"},t.userName))),o.a.createElement(y.a,{item:!0,md:2},o.a.createElement("div",{className:"card__button-group items-center bg-paper"},o.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"filter_none"),o.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"share"),o.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"edit"),o.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"delete")),o.a.createElement("div",{className:"card__drop-menu text-right"},o.a.createElement(te.a,{smDown:!0},o.a.createElement(se.p,{menuButton:o.a.createElement(ne.a,null,o.a.createElement(x.a,null,"more_horiz"))},o.a.createElement(u.a,{className:"flex items-center"},o.a.createElement(x.a,{className:"mr-4"},"filter_none")," ","Duplicate"),o.a.createElement(u.a,{className:"flex items-center"},o.a.createElement(x.a,{className:"mr-4"},"share")," ","Share"),o.a.createElement(u.a,{className:"flex items-center"},o.a.createElement(x.a,{className:"mr-4"},"edit")," ","Edit"),o.a.createElement(u.a,{className:"flex items-center"},o.a.createElement(x.a,{className:"mr-4"},"delete")," ","Delete")))))))))};const me=Object($.a)(e=>{e.palette,Object(Z.a)(e,["palette"]);return{gridCard:{"& .grid__card-overlay":{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2,opacity:0,transition:"all 250ms ease-in-out",background:"rgba(0, 0, 0, 0.67)","& > div:nth-child(2)":{position:"absolute",top:0,bottom:0,right:0,left:0,zIndex:-1}},"& .grid__card-bottom":{"& .email":{display:"none"}},"&:hover":{"& .grid__card-overlay":{opacity:1},"& .grid__card-bottom":{"& .email":{display:"block"},"& .date":{display:"none"}}}}}});var de=({list:e=[],sliderValue:a,onSelectionChauffeur:t})=>{const r=me();return o.a.createElement("div",null,o.a.createElement(y.a,{container:!0,spacing:2},e.map((e,n)=>{return o.a.createElement(y.a,{item:!0,sm:(l=a,25===l?2:50===l?3:75===l?4:100===l?6:void 0),key:e.chauffeur.id},o.a.createElement(v.a,{className:Object(K.default)("flex-column h-full",r.gridCard),elevation:6},o.a.createElement("div",{className:"grid__card-top text-center relative"},o.a.createElement("img",{className:"block w-full",src:M.e+"/fichiers/photosvehicules/"+e.photo,alt:e.chauffeur.nom+" "+e.chauffeur.prenom}),o.a.createElement("div",{className:"grid__card-overlay flex-column"},o.a.createElement("div",{className:"flex items-center justify-between"},o.a.createElement("div",{className:"flex items-center cursor-pointer text-white"},e.typevehicule.nom+" "+e.marque)),o.a.createElement("div",{className:"flex items-center justify-center"},o.a.createElement(f.a,{variant:"outlined",className:"text-white border-color-white",onClick:()=>t(e.chauffeur.id)},"S\xe9lectionner")))),o.a.createElement("div",{className:"grid__card-bottom text-center py-2"},o.a.createElement("p",{className:"m-0"},e.chauffeur.nom+" "+e.chauffeur.prenom),o.a.createElement("small",{className:"date text-muted"},e.chauffeur.telephone+"("+e.chauffeur.quartier.nom+")"),o.a.createElement("small",{className:"email text-muted"},e.chauffeur.telephone+"("+e.chauffeur.quartier.nom+")"),o.a.createElement("p",{className:"m-0"},e.typevehicule.nom+" / "+e.marque))));var l})))},ue=t(143),pe=t(2351);var be=({onSelectionChauffeur:e})=>{const a=Object(l.useState)([]),t=Object(n.a)(a,2),r=t[0],s=(t[1],Object(l.useState)(25)),i=Object(n.a)(s,2),c=i[0],m=i[1],d=Object(l.useState)([]),u=Object(n.a)(d,2),p=(u[0],u[1]),b=Object(l.useState)("grid"),f=Object(n.a)(b,2),v=f[0],y=f[1],h=Object(l.useMemo)(()=>Object(ue.debounce)(e=>{let a=r.filter(a=>a.projectName.toLowerCase().match(e.toLowerCase()));p([...a])},200),[r]),E=(Object(N.useQueryClient)(),Object(N.useQuery)(["Vehicules"],()=>Object(pe.a)(0,1e3,"",""),{keepPreviousData:!0}));return o.a.createElement("div",{className:"list m-sm-30"},o.a.createElement("div",{className:"mb-4"},o.a.createElement(le,{viewMode:v,handleViewChange:e=>{y(e)},handleInputChange:e=>{let a=e.target.value;h(a)},handleSldierChange:(e,a)=>{m(a)},sliderValue:c})),E.isLoading?o.a.createElement(A.a,{message:"chargement de la liste des chauffeurs"}):o.a.createElement(o.a.Fragment,null,o.a.createElement(te.a,{xsDown:!0},"list"===v?o.a.createElement(ce,{list:E.data["hydra:member"]}):o.a.createElement(de,{list:E.data["hydra:member"],sliderValue:c,onSelectionChauffeur:e})),o.a.createElement(te.a,{smUp:!0},o.a.createElement(de,{list:E.data["hydra:member"],sliderValue:c}))))};var fe=({open:e,onSelectionChauffeur:a,onClickSurAnnuler:t,title:r="S\xe9lectionner le chauffeur"})=>o.a.createElement(X.a,{fullScreen:!0,maxWidth:"xl",open:e},o.a.createElement("div",{className:"p-8 text-center"},o.a.createElement("h4",{className:"capitalize m-0 mb-2"},r),o.a.createElement("p",null,"S\xe9lectionner le chauffeur pour ex\xe9cuter cette commande"),o.a.createElement("div",{className:"flex justify-center pt-2 m--2"},o.a.createElement(f.a,{className:"m-2 rounded hover-bg-secondary px-6",variant:"outlined",color:"secondary",onClick:t},"Abandonner l'op\xe9ration")),o.a.createElement(be,{onSelectionChauffeur:a}),o.a.createElement("div",{className:"flex justify-center pt-2 m--2"},o.a.createElement(f.a,{className:"m-2 rounded hover-bg-secondary px-6",variant:"outlined",color:"secondary",onClick:t},"Abandonner l'op\xe9ration"))));a.default=()=>{const e=Object(l.useState)({page:0,rowsPerPage:20,recherche:"Nouveau",filtre:""}),a=Object(n.a)(e,2),t=a[0],s=a[1],h=Object(N.useQueryClient)(),E=Object(N.useQuery)(["Commandes",t.page,t.rowsPerPage,t.recherche,t.filtre],()=>Object(O.c)(t.page,t.rowsPerPage,t.recherche,t.filtre),{keepPreviousData:!0}),g=E.isLoading,j=(E.isFetching,E.isError),x=E.error,C=E.data,S=Object(N.useMutation)(O.g,{onSuccess:()=>{ee({message:"Suppr\xe9ssion r\xe9ussi",open:!0,severity:"success"})},onError:()=>{ee({message:"Echec lors de l op\xe9ration",open:!0,severity:"error"})},onSettled:()=>{h.invalidateQueries("Commandes")}}),P=Object(N.useMutation)(O.b,{onSuccess:()=>{ee({message:"Op\xe9ration r\xe9ussie",open:!0,severity:"success"})},onError:()=>{ee({message:"Echec lors de l op\xe9ration",open:!0,severity:"error"})},onSettled:()=>{h.invalidateQueries("Commandes")}}),k=[{id:4,nom:"Nouveau"}],q=Object(l.useState)({open:!1,idChauffeur:null,commandeEnCours:0}),D=Object(n.a)(q,2),_=D[0],R=D[1],B=Object(l.useState)(null),M=Object(n.a)(B,2),L=M[0],Q=M[1],z=Object(l.useState)({mode:"affichage",action:"ajout",affichageTable:!0}),V=Object(n.a)(z,2),F=V[0],T=V[1],X=Object(l.useState)({severity:"severity",message:"",open:!1,handleCloseAlert:()=>ce()}),Z=Object(n.a)(X,2),$=Z[0],ee=Z[1],ae=Object(l.useState)("Liste des nouvelles commandes"),te=Object(n.a)(ae,2),re=te[0],ne=te[1],le=Object(l.useState)(!1),oe=Object(n.a)(le,2),se=oe[0],ie=oe[1],ce=()=>{ee(Object(r.a)(Object(r.a)({},w.a),{},{open:!1}))},me=[{name:"id",label:"ID",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>o.a.createElement(o.a.Fragment,null,"id: ",e," ","Colis"==a.rowData[5].nom?o.a.createElement(o.a.Fragment,null,o.a.createElement(W.a,null),o.a.createElement("br",null)," "):"","Colis"==a.rowData[5].nom?o.a.createElement("strong",null,a.rowData[6].nom):"",o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},Object(I.a)(Object(Y.a)(a.rowData[15]),"dd/MM/yyyy hh:mm")))}},{name:"client",label:"Client",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>o.a.createElement(o.a.Fragment,null,e.nom+" "+e.prenom,o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},e.telephone))}},{name:"quartierdedepart",label:"Depart",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>{var r;return o.a.createElement(o.a.Fragment,null,null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"",o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},a.rowData[10]))}}},{name:"quartierdarrivee",label:"Arriv\xe9e",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>{var r;return o.a.createElement(o.a.Fragment,null,null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"",o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},a.rowData[11]))}}},{name:"chauffeur",label:"ID",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>e}},{name:"typedecourse",label:"Type de course",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,a,t)=>{switch(e.id){case 1:return e.nom;case 2:return o.a.createElement("span",null," ",e.nom,": ",o.a.createElement("br",null)," ",o.a.createElement("strong",null,a.rowData[6].nom)," ")}}}},{name:"typedecoli",label:"Type de colis",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:""}}},{name:"traitepar",label:"trait\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>e}},{name:"encaissepar",label:"Encaiss\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>e}},{name:"modedepayement",label:"Mode de payement",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>e}},{name:"adressedepart",label:"Adresse de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,a,t)=>e}},{name:"adressearrivee",label:"Adresse d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,a,t)=>e}},{name:"gpsdepart",label:"Position GPS de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,a,t)=>e}},{name:"gpsarrivee",label:"Position GPS d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,a,t)=>e}},{name:"statut",label:"Statut",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>o.a.createElement("small",{className:Object(K.default)({"border-radius-4  text-white px-2 py-2px":!0,"bg-primary":"Nouveau"===e,"bg-light-green":"En cours d'ex\xe9cution"===e,"bg-error":"Annul\xe9e"===e,"bg-secondary":"Confirm\xe9e"===e,"bg-green":"Clotur\xe9e"===e})},e)}},{name:"datecommande",label:"Date de la commande",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,a,t)=>Object(I.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"executionimmediate",label:"Execution immediate",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>o.a.createElement(m.a,{checked:e})}},{name:"dateexecution",label:"Date d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>Object(I.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"traitele",label:"Trait\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>e}},{name:"datedebutexecution",label:"D\xe9but d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>e}},{name:"datefinexecution",label:"Fin d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>e}},{name:"encaissele",label:"Encaiss\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>e}},{name:"montant",label:"montant",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,a,t)=>e}},{name:"recepteurducolis",label:"Recepteur du colis",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,a,t)=>o.a.createElement(o.a.Fragment,null,e,o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},a.rowData[24]))}},{name:"telephonerecepteur",label:"T\xe9l\xe9phone du recepteur de colis",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,a,t)=>e}},{name:"action",label:"Actions",options:{filter:!1,display:"excluded",sort:!1,customBodyRender:(e,a,t)=>o.a.createElement("div",null,o.a.createElement(d.a,{disabled:!0,value:a.rowData[10],id:a.rowData[0],name:a.rowData[0],variant:"outlined",onChange:e=>((e,a)=>{let t=e.target.value,n=a;"Confirm\xe9e"!=t?P.mutate({id:n,chauffeur:2,operation:t}):R(Object(r.a)(Object(r.a)({},_),{},{open:!0,commandeEnCours:n}))})(e,a.rowData[0])},k.map(e=>o.a.createElement(u.a,{key:e.id,value:e.nom},e.nom))))}}];return o.a.createElement("div",{className:"m-sm-30"},o.a.createElement(w.a,{message:$.message,severity:$.severity,open:$.open,handleAlertClose:ce}),o.a.createElement(fe,{open:_.open,onSelectionChauffeur:e=>{R(Object(r.a)(Object(r.a)({},_),{},{open:!1,idChauffeur:e})),P.mutate({id:_.commandeEnCours,chauffeur:e,operation:"Confirm\xe9e"})},onClickSurAnnuler:()=>{R(Object(r.a)(Object(r.a)({},_),{},{open:!1}))}}),o.a.createElement("div",{className:"mb-sm-30"},o.a.createElement(G.a,{routeSegments:[{name:"Liste des nouvelles commandes"}]})),o.a.createElement("div",{className:"mb-sm-30"},o.a.createElement(p.a,{variant:"h4"},re)),"affichage"===F.mode?o.a.createElement(b.a,{in:F.affichageTable,direction:"right",unmountOnExit:!0},o.a.createElement("div",null,o.a.createElement(f.a,{className:"mb-4",variant:"contained",color:"primary",onClick:()=>(T({mode:"edition",action:"ajout",affichageTable:!1}),Q(null),void ne("Nouvelle commande"))},"Nouvelle commande"),g?o.a.createElement(A.a,{message:"Chargement des donn\xe9es",type:"info"}):j?o.a.createElement(A.a,{message:"Erreur lors du chargement des donn\xe9es::"+x,type:"error"}):o.a.createElement(U.a,{tag:"div",blocking:!1},o.a.createElement(i.a,{title:re,data:C["hydra:member"],columns:me,options:Object(r.a)(Object(r.a)({},c.a),{},{serverSide:!0,count:C["hydra:totalItems"],rowsPerPageOptions:[20,30,50],rowsPerPage:t.rowsPerPage,onChangePage:e=>(e=>{s(Object(r.a)(Object(r.a)({},t),{},{page:e})),h.invalidateQueries("Commandes")})(e),onChangeRowsPerPage:e=>(e=>{s(Object(r.a)(Object(r.a)({},t),{},{rowsPerPage:e})),console.log("statutbre de ligne par page:"+e),h.invalidateQueries("Commandes")})(e),onSearchChange:e=>(e=>{var a;console.log(null!==(a="texte a chercher"+e)&&void 0!==a?a:""),h.invalidateQueries("Commandes")})(e),onFilterChange:()=>{console.log("le filtre a chang\xe9")}})})),o.a.createElement(v.a,{className:"w-full overflow-auto",elevation:8},o.a.createElement(J.a,{open:se,onConfirmDialogClose:()=>{ie(!1)},onYesClick:()=>{ie(!1),S.mutate(L)},text:"Confirmez la suppression de "+(null===L||void 0===L?void 0:L.name)})))):o.a.createElement(y.a,{container:!0,spacing:6,alignContent:"center",justify:"center"},o.a.createElement(y.a,{item:!0,lg:6,md:6,sm:12,xs:12},o.a.createElement(v.a,{className:"px-6 pt-2 pb-4"},o.a.createElement(H,{action:F.action,lecommande:L,handleFermeture:()=>{T({mode:"affichage",action:"nouveau",affichageTable:!0}),ne("Liste des nouvelles commandes")}})))))}}}]);