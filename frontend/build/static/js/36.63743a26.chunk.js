(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[36],{2337:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"f",(function(){return y})),a.d(t,"g",(function(){return h})),a.d(t,"b",(function(){return g}));var r=a(7),n=a.n(r),o=a(10),l=a(9);function s(e,t,a,r){return i.apply(this,arguments)}function i(){return(i=Object(o.a)(n.a.mark((function e(t,a,r,o){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,l.b.get("/commandes?itemsPerPage="+a+"&page="+t+"&statut="+r);case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,t,a,r,n,o,l){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(n.a.mark((function e(t,a,r,o,s,i,c){var d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,l.b.get("/periode/commandes/"+s.id+"?dateinitiale="+i+"&datefinale="+c+"&rowsPerPage="+a+"&page="+t);case 3:return d=e.sent,e.abrupt("return",d.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t,a,r,n,o,l){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(n.a.mark((function e(t,a,r,o,s,i,c){var d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,l.b.get("/periode/chauffeurs/"+s.id+"?dateinitiale="+i+"&datefinale="+c+"&rowsPerPage="+a+"&page="+t);case 3:return d=e.sent,e.abrupt("return",d.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.post("/commandes",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.put("/commandes/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.delete("/commandes/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,l.b.post("/commande/"+t.id,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2370:function(e,t,a){"use strict";var r=a(0),n=a(47);t.a=Object(n.a)(r.createElement("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"LocalShipping")},3194:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return F}));var r=a(3),n=a(12),o=a(0),l=a.n(o),s=a(36),i=a(99),c=a(785),d=a(2223),u=a(58),m=a(448),p=a(21),f=a(771),y=a(431),b=a(586),h=a(2337),v=a(56),g=a(63),E=a(17),j=(a(43),a(240),a(57),a(214),a(215),a(374)),O=(a(213),a(241),a(7)),x=a.n(O),w=a(10),R=a(9);function P(){return(P=Object(w.a)(x.a.mark((function e(t,a,r,n){var o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,R.b.get("/chauffeurs?itemsPerPage="+a+"&page="+t+"&nom="+r);case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=a(33),B=a(1217),C=a(135),M=a.n(C),k=a(100),q=a(4),N=a(2370),L=a(2304);const S=s.b().shape({client:s.c().required("Le  client est requis"),modedepayement:s.c().required("Le mode de payement est requis"),adressedepart:s.c().required("Le champs Adresse de d\xe9part est requis"),adressearrivee:s.c().required("Le champs Adresse d arriv\xe9e est requis"),montant:s.a().required("Montant requis").positive("Le mntant doit \xeatre un entier positif").integer("Le montant doit \xeatre un nombre entier")});function F({id:e,lecommande:t,handleFermeture:a,action:s}){const O=Object(E.useQueryClient)(),x=Object(o.useState)({page:0,rowsPerPage:20,recherche:"",filtre:""}),w=Object(n.a)(x,2),R=w[0],C=w[1],F=Object(o.useState)({chauffeur:{id:1},dateinitiale:Object(B.a)(Date.parse(Date()),"yyyy-MM-dd"),datefinale:Object(B.a)(Date.parse(Date()),"yyyy-MM-dd")}),A=Object(n.a)(F,2),Q=A[0],T=A[1],H=Object(E.useQuery)(["Chauffeurs",1],()=>function(e,t,a,r){return P.apply(this,arguments)}(0,100,"",""),{keepPreviousData:!0}),z=Object(E.useQuery)(["Commandes",Q,R],()=>Object(h.d)(R.page,R.rowsPerPage,R.recherche,R.filtre,Q.chauffeur,Q.dateinitiale,Q.datefinale),{keepPreviousData:!0}),G=Object(o.useState)({severity:"severity",message:"",open:!1,automaticClose:!0}),J=Object(n.a)(G,2),V=J[0],I=J[1],W=Object(v.c)({resolver:Object(i.yupResolver)(S)}),K=W.control,U=(W.handleSubmit,W.errors);W.reset;const X=[{name:"id",label:"ID",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>l.a.createElement(l.a.Fragment,null,"id: ",e," ","Colis"===t.rowData[5].nom?l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,null),l.a.createElement("br",null)):"","Colis"===t.rowData[5].nom?l.a.createElement("strong",null,t.rowData[6].nom):"",l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},Object(B.a)(Object(L.a)(t.rowData[15]),"dd/MM/yyyy hh:mm")))}},{name:"client",label:"Client",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>l.a.createElement(l.a.Fragment,null,e.nom+" "+e.prenom,l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},e.telephone))}},{name:"quartierdedepart",label:"Depart",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return l.a.createElement(l.a.Fragment,null,null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"",l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},t.rowData[10]))}}},{name:"quartierdarrivee",label:"Arriv\xe9e",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return l.a.createElement(l.a.Fragment,null,null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"",l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},t.rowData[11]))}}},{name:"chauffeur",label:"Chauffeur",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r,n,o;return l.a.createElement(l.a.Fragment,null,(null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"")+" "+(null!==(n=null===e||void 0===e?void 0:e.prenom)&&void 0!==n?n:""),l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},null!==(o=null===e||void 0===e?void 0:e.telephone)&&void 0!==o?o:""))}}},{name:"typedecourse",label:"Type de course",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>{switch(e.id){case 1:return e.nom;case 2:return l.a.createElement("span",null," ",e.nom,": ",l.a.createElement("br",null)," ",l.a.createElement("strong",null,t.rowData[6].nom)," ")}}}},{name:"typedecoli",label:"Type de colis",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:""}}},{name:"traitepar",label:"trait\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"encaissepar",label:"Encaiss\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"modedepayement",label:"Mode de payement",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"adressedepart",label:"Adresse de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"adressearrivee",label:"Adresse d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"gpsdepart",label:"Position GPS de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"gpsarrivee",label:"Position GPS d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"statut",label:"Statut",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>l.a.createElement("small",{className:Object(q.default)({"border-radius-4  text-white px-2 py-2px":!0,"bg-primary":"Nouveau"===e,"bg-light-green":"En cours d'ex\xe9cution"===e,"bg-error":"Annul\xe9e"===e,"bg-secondary":"Confirm\xe9e"===e,"bg-green":"Clotur\xe9e"===e,"bg-gray":"Trait\xe9e"===e})},e)}},{name:"datecommande",label:"Date de la commande",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>Object(B.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"executionimmediate",label:"Execution immediate",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>l.a.createElement(c.a,{checked:e})}},{name:"dateexecution",label:"Date d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>Object(B.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"traitele",label:"Trait\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"datedebutexecution",label:"D\xe9but d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"datefinexecution",label:"Fin d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"encaissele",label:"Encaiss\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"montant",label:"montant",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"recepteurducolis",label:"Recepteur du colis",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>l.a.createElement(l.a.Fragment,null,e,l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},t.rowData[24]))}},{name:"telephonerecepteur",label:"T\xe9l\xe9phone du recepteur de colis",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"action",label:"Actions",options:{filter:!1,display:"excluded",sort:!1,customBodyRender:(e,t,a)=>l.a.createElement("div",null)}}];return l.a.createElement("div",null,l.a.createElement(g.a,{message:V.message,severity:V.severity,open:V.open,handleAlertClose:V.automaticClose?a:()=>I(Object(r.a)(Object(r.a)({},V),{},{open:!1}))}),l.a.createElement("div",{className:"m-sm-30"},l.a.createElement("div",{className:"mb-sm-30"},l.a.createElement(d.a,{routeSegments:[{name:"Requetes sur les commandes"}]})),l.a.createElement("div",{className:"mb-sm-30"},l.a.createElement(u.a,{variant:"h4"},"Rapport de commandes chauffeurs")),l.a.createElement(m.a,{className:"mb-sm-30"},l.a.createElement("form",null,l.a.createElement(p.a,{container:!0,spacing:3,direction:"column"},l.a.createElement(f.a,{pl:3,pb:5,pt:3},l.a.createElement(p.a,{item:!0},l.a.createElement(p.a,{container:!0,spacing:5,direction:"row"},l.a.createElement(p.a,{item:!0,sm:3,pt:5,pl:10},!0===H.isLoading?l.a.createElement(D.a,{message:"chargement"}):l.a.createElement(f.a,{pl:3},l.a.createElement(y.a,{fullWidth:!0,id:"chauffeur",name:"chauffeur",label:"chauffeur",select:!0,value:Q.chauffeur,onChange:function(e){console.log(e.target.value),T(Object(r.a)(Object(r.a)({},Q),{},{chauffeur:e.target.value})),O.invalidateQueries("Commandes")},helperText:"",error:!1},H.data["hydra:member"].map(e=>l.a.createElement(b.a,{key:e.id,value:e},e.nom," ",e.prenom))))),l.a.createElement(p.a,{item:!0,sm:3},l.a.createElement(j.a,{id:"dateinitiale",nom:"datefinale",label:"Date initiale",valeur:Q.dateinitiale,error:U.dateinitiale,control:K,handledatechange:function(e){console.log("Date initiale..."+e),T(Object(r.a)(Object(r.a)({},Q),{},{dateinitiale:Object(B.a)(Date.parse(e),"yyyy-MM-dd")})),O.invalidateQueries("Commandes")}})),l.a.createElement(p.a,{item:!0,sm:3},l.a.createElement(j.a,{id:"datefinale",nom:"datefinale",label:"Date finale",valeur:Q.datefinale,error:U.datefinale,control:K,handledatechange:function(e){console.log("date finale:::"+e),T(Object(r.a)(Object(r.a)({},Q),{},{datefinale:Object(B.a)(Date.parse(e),"yyyy-MM-dd")})),O.invalidateQueries("Commandes")}})))))))),l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(m.a,{className:"mb-sm-30"},l.a.createElement(f.a,{pl:5,pt:1,pb:1},l.a.createElement(u.a,{variant:"body1",color:"initial"},"Montant total:"),l.a.createElement(u.a,{variant:"h6",color:"primary"},z.isLoading?l.a.createElement(D.a,{message:"Chargement des donn\xe9es...",type:"info"}):z.isError?l.a.createElement(D.a,{message:"Erreur lors du chargement des donn\xe9es::"+z.error,type:"error"}):z.data.montanttotal))," "),z.isLoading?l.a.createElement(D.a,{message:"Chargement des donn\xe9es...",type:"info"}):z.isError?l.a.createElement(D.a,{message:"Erreur lors du chargement des donn\xe9es::"+z.error,type:"error"}):l.a.createElement(M.a,{title:"Requ\xeates sur les commandes",data:z.data.commandes,columns:X,options:Object(r.a)(Object(r.a)({},k.a),{},{serverSide:!0,count:z.data.total,rowsPerPageOptions:[20,30,50,100],rowsPerPage:R.rowsPerPage,onChangePage:e=>(e=>{C(Object(r.a)(Object(r.a)({},R),{},{page:e})),O.invalidateQueries("Commandes")})(e),onChangeRowsPerPage:e=>(e=>{C(Object(r.a)(Object(r.a)({},R),{},{rowsPerPage:e})),console.log("statutbre de ligne par page:"+e),O.invalidateQueries("Commandes")})(e),onSearchChange:e=>(e=>{var t;C(Object(r.a)(Object(r.a)({},R),{},{recherche:null!==e&&void 0!==e?e:""})),console.log(null!==(t="texte a chercher"+e)&&void 0!==t?t:""),O.invalidateQueries("Commandes")})(e),onFilterChange:()=>{console.log("le filtre a chang\xe9")}})})))))}}}]);